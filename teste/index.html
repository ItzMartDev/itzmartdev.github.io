<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <title>Torrent Web Lite</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <meta name="description" content="Cliente BitTorrent no navegador (WebTorrent) para stream e download â€“ compatÃ­vel com GitHub Pages." />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="container header-inner">
        <h1>ï¿½ Torrent Web Lite</h1>
        <nav class="header-actions">
          <a href="#" id="toggleHelp" aria-label="Ajuda">ğŸ“š Ajuda</a>
          <a href="https://webtorrent.io" target="_blank" rel="noopener">ğŸ”— WebTorrent</a>
          <a href="https://github.com" target="_blank" rel="noopener">ğŸ™ GitHub</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <section class="adder" aria-labelledby="add-torrent-title">
        <h2 id="add-torrent-title">ğŸš€ Adicionar Torrent</h2>
        <div class="adder-row">
          <input id="magnetInput" type="text" inputmode="url" placeholder="Cole um magnet link aqui (ex.: magnet:?xt=urn:btih:...)" aria-label="Magnet link" />
          <button id="addMagnetBtn" class="primary">â• Adicionar</button>
          <div class="or">ou</div>
          <label class="file-btn">
            <input id="torrentFileInput" type="file" accept=".torrent" hidden />
            <span class="secondary">ğŸ“ Escolher .torrent</span>
          </label>
        </div>
        <div id="dropArea" class="drop-area" tabindex="0" aria-label="Solte um arquivo .torrent aqui">
          ğŸ“‚ Arraste e solte um arquivo .torrent aqui
        </div>
        <p class="hint">ğŸ”’ Tudo roda 100% no seu navegador. NÃ£o hÃ¡ upload de arquivos para servidores.</p>
      </section>

      <section class="stats" aria-live="polite">
        <div id="globalStats" class="stats-row">
          <div><strong>â¬‡ï¸ Baixando</strong> <span id="dlSpeed">0 B/s</span></div>
          <div><strong>â¬†ï¸ Enviando</strong> <span id="upSpeed">0 B/s</span></div>
          <div><strong>ğŸ‘¥ Peers</strong> <span id="peers">0</span></div>
          <div><strong>ğŸ“Š Torrents</strong> <span id="tcount">0</span></div>
        </div>
      </section>

      <section>
        <h2>ğŸ“¥ Torrents</h2>
        <div id="torrents" class="torrents">
          <div class="loading-state">
            <p>â³ Carregando WebTorrent... Aguarde alguns segundos.</p>
            <div class="spinner" style="margin: 10px auto;"></div>
          </div>
          <p class="empty-state" style="display: none;">ğŸ“­ Nenhum torrent adicionado ainda. Cole um magnet link ou solte um arquivo .torrent acima.</p>
        </div>
      </section>

      <section id="playerSection" class="player hidden" aria-labelledby="player-title">
        <h2 id="player-title">ğŸ¬ Reprodutor</h2>
        <video id="player" controls playsinline></video>
        <div class="player-controls">
          <button id="stopPlayer">â¹ï¸ Fechar player</button>
          <a id="downloadCurrent" class="secondary" href="#" download>ğŸ’¾ Baixar arquivo atual</a>
        </div>
      </section>

      <section id="help" class="help hidden">
        <h2>ğŸ“š Ajuda & LimitaÃ§Ãµes</h2>
        <ul>
          <li><strong>ğŸš€ Como usar:</strong> Cole um magnet link ou solte um arquivo .torrent. Aguarde a conexÃ£o com peers.</li>
          <li><strong>ğŸŒ WebRTC necessÃ¡rio:</strong> Funciona apenas com torrents que tÃªm peers WebRTC. Nem todos os torrents tradicionais funcionam.</li>
          <li><strong>ğŸ¬ Streaming:</strong> Clique em "Stream" para reproduzir vÃ­deos/Ã¡udios suportados (mp4/webm/ogg/mp3/m4a/wav).</li>
          <li><strong>âš ï¸ Problemas comuns:</strong>
            <ul>
              <li>Se "Nenhum peer encontrado": O torrent pode nÃ£o ter suporte WebRTC ou estar offline.</li>
              <li>Se "ConexÃ£o lenta": Alguns trackers estÃ£o offline. Tente novamente mais tarde.</li>
              <li>Se erro no stream: O arquivo pode nÃ£o ser compatÃ­vel ou corrompido.</li>
            </ul>
          </li>
          <li><strong>ğŸ”’ Privacidade:</strong> Seu IP Ã© visÃ­vel para peers (como qualquer P2P). Use VPN se necessÃ¡rio.</li>
          <li><strong>ğŸ’» Compatibilidade:</strong> Melhor em Chrome/Firefox. Edge/Safari podem ter limitaÃ§Ãµes.</li>
        </ul>
      </section>
    </main>

    <footer class="app-footer">
      <div class="container">
        <small>
          ğŸ› ï¸ Feito com WebTorrent. HospedÃ¡vel no GitHub Pages (gratuito). Este projeto Ã© educacional e nÃ£o incentiva pirataria.
        </small>
      </div>
    </footer>

  <script src="https://cdn.jsdelivr.net/npm/webtorrent@latest/webtorrent.min.js" crossorigin="anonymous"></script>
    <script src="./app.js"></script>
  </body>
</html>
