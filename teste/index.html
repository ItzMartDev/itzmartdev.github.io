<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <title>Torrent Web Lite</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <meta name="description" content="Cliente BitTorrent no navegador (WebTorrent) para stream e download ‚Äì compat√≠vel com GitHub Pages." />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="container header-inner">
        <h1>üé¨ Torrent Web Lite</h1>
        <nav class="header-actions">
          <a href="#" id="toggleHelp" aria-label="Ajuda">Ajuda</a>
          <a href="https://webtorrent.io" target="_blank" rel="noopener">WebTorrent</a>
          <a href="https://github.com" target="_blank" rel="noopener">GitHub</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <section class="adder" aria-labelledby="add-torrent-title">
        <h2 id="add-torrent-title">Adicionar Torrent</h2>
        <div class="adder-row">
          <input id="magnetInput" type="text" inputmode="url" placeholder="Cole um magnet link aqui (ex.: magnet:?xt=urn:btih:...)" aria-label="Magnet link" />
          <button id="addMagnetBtn" class="primary">Adicionar</button>
          <div class="or">ou</div>
          <label class="file-btn">
            <input id="torrentFileInput" type="file" accept=".torrent" hidden />
            <span class="secondary">Escolher .torrent</span>
          </label>
        </div>
        <div id="dropArea" class="drop-area" tabindex="0" aria-label="Solte um arquivo .torrent aqui">
          Arraste e solte um arquivo .torrent aqui
        </div>
        <p class="hint">Tudo roda 100% no seu navegador. N√£o h√° upload de arquivos para servidores.</p>
      </section>

      <section class="stats" aria-live="polite">
        <div id="globalStats" class="stats-row">
          <div><strong>Baixando:</strong> <span id="dlSpeed">0 B/s</span></div>
          <div><strong>Enviando:</strong> <span id="upSpeed">0 B/s</span></div>
          <div><strong>Peers:</strong> <span id="peers">0</span></div>
          <div><strong>Torrents:</strong> <span id="tcount">0</span></div>
        </div>
      </section>

      <section>
        <h2>Torrents</h2>
        <div id="torrents" class="torrents">
          <div class="loading-state">
            <p>Carregando WebTorrent... Aguarde alguns segundos.</p>
            <div class="spinner" style="margin: 10px auto;"></div>
          </div>
          <p class="empty-state" style="display: none;">Nenhum torrent adicionado ainda. Cole um magnet link ou solte um arquivo .torrent acima.</p>
        </div>
      </section>

      <section id="playerSection" class="player hidden" aria-labelledby="player-title">
        <h2 id="player-title">Reprodutor</h2>
        <video id="player" controls playsinline></video>
        <div class="player-controls">
          <button id="stopPlayer">Fechar player</button>
          <a id="downloadCurrent" class="secondary" href="#" download>Baixar arquivo atual</a>
        </div>
      </section>

      <section id="help" class="help hidden">
        <h2>Ajuda & Limita√ß√µes</h2>
        <ul>
          <li><strong>Como usar:</strong> Cole um magnet link ou solte um arquivo .torrent. Aguarde a conex√£o com peers.</li>
          <li><strong>WebRTC necess√°rio:</strong> Funciona apenas com torrents que t√™m peers WebRTC. Nem todos os torrents tradicionais funcionam.</li>
          <li><strong>Streaming:</strong> Clique em "Stream" para reproduzir v√≠deos/√°udios suportados (mp4/webm/ogg/mp3/m4a/wav).</li>
          <li><strong>Problemas comuns:</strong>
            <ul>
              <li>Se "Nenhum peer encontrado": O torrent pode n√£o ter suporte WebRTC ou estar offline.</li>
              <li>Se "Conex√£o lenta": Alguns trackers est√£o offline. Tente novamente mais tarde.</li>
              <li>Se erro no stream: O arquivo pode n√£o ser compat√≠vel ou corrompido.</li>
            </ul>
          </li>
          <li><strong>Privacidade:</strong> Seu IP √© vis√≠vel para peers (como qualquer P2P). Use VPN se necess√°rio.</li>
          <li><strong>Suporte:</strong> Funciona melhor em Chrome/Firefox. Edge/Safari podem ter limita√ß√µes.</li>
        </ul>
      </section>
    </main>

    <footer class="app-footer">
      <div class="container">
        <small>
          Feito com WebTorrent. Hosped√°vel no GitHub Pages (est√°tico). Este projeto √© educacional e n√£o incentiva pirataria.
        </small>
      </div>
    </footer>

  <script src="https://cdn.jsdelivr.net/npm/webtorrent@latest/webtorrent.min.js" crossorigin="anonymous"></script>
    <script src="./app.js"></script>
  </body>
</html>
